<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script type="module" src="/js/carrito.js"></script>
<section class="product-section">
  <br>
  <center>
    <h2>Productos de la categor√≠a: {{category}}</h2>
  </center>
  <div class="container">
    {{#each products}}
    <div class="product-card col-md-4 mb-4">
      <h2 style="font-size: 1rem !important;">{{this.name}}</h2>
      <div id="carousel{{this._id}}" class="carousel slide">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="/images/{{this.category}}/{{this.imageUrl1}}" alt="{{this.name}}" class="product-image d-block w-100">
          </div>
          {{#if this.imageUrl2}}
          <div class="carousel-item">
            <img src="/images/{{this.category}}/{{this.imageUrl2}}" alt="{{this.name}}" class="product-image d-block w-100">
          </div>
          {{/if}}
        </div>
        <!-- Controles del carrusel -->
        <a class="carousel-control-prev" href="#carousel{{this._id}}" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel{{this._id}}" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      <p class="description">{{this.description}}</p>
      <p class="category">{{this.category}}</p>
      <p class="price">{{this.price}} u$s</p>
      <div class="input-group mb-3">
        <input type="number" class="form-control quantity-input" value="1" min="1">
        <button class="add-to-cart-btn btn btn-primary" data-product-id="{{this._id}}">Agregar al carrito</button>
      </div>
    </div>
    {{/each}}
  </div>

  <div class="pagination mt-4">
    {{#if products.hasNextPage}}
    <a href="?page={{products.nextPage}}&limit={{products.limit}}" class="btn btn-secondary">Next</a>
    {{/if}}
    {{#if products.hasPrevPage}}
    <a href="?page={{products.prevPage}}&limit={{products.limit}}" class="btn btn-secondary">Previous</a>
    {{/if}}
  </div>
</section>